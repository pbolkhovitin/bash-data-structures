#!/bin/bash

# priority_queue_demo.sh - –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏

echo "üéØ –î–ï–ú–û–ù–°–¢–†–ê–¶–ò–Ø –ü–†–ò–û–†–ò–¢–ï–¢–ù–û–ô –û–ß–ï–†–ï–î–ò"
echo "==================================="

source ../../src/priority_queue.sh

# –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
priority_queue_api init
echo "‚úÖ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–∞—è –æ—á–µ—Ä–µ–¥—å –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞"

# –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–∞—á–∏ —Å —Ä–∞–∑–Ω—ã–º–∏ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏
echo ""
echo "üì• –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–¥–∞—á —Å –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞–º–∏:"
priority_queue_api enqueue "–û–±—ã—á–Ω–∞—è –∑–∞–¥–∞—á–∞" 5
priority_queue_api enqueue "–°—Ä–æ—á–Ω–∞—è –∑–∞–¥–∞—á–∞" 1
priority_queue_api enqueue "–í–∞–∂–Ω–∞—è –∑–∞–¥–∞—á–∞" 3
priority_queue_api enqueue "–û—á–µ–Ω—å —Å—Ä–æ—á–Ω–∞—è" 1  # –ë–æ–ª–µ–µ –≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç, –Ω–æ –¥–æ–±–∞–≤–∏–ª–∞—Å—å –ø–æ–∑–∂–µ

echo "–†–∞–∑–º–µ—Ä –æ—á–µ—Ä–µ–¥–∏: $(priority_queue_api size)"
echo "–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –≤–µ—Ä—Ö–Ω–µ–π –∑–∞–¥–∞—á–∏: $(priority_queue_api peek_priority)"

# –û—Ç–æ–±—Ä–∞–∂–∞–µ–º —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ
echo ""
echo "üìã –°–æ–¥–µ—Ä–∂–∏–º–æ–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω–æ–π –æ—á–µ—Ä–µ–¥–∏:"
priority_queue_api display

# –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–∞–¥–∞—á–∏ –≤ –ø–æ—Ä—è–¥–∫–µ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç–∞
echo ""
echo "üì§ –û–±—Ä–∞–±–æ—Ç–∫–∞ –∑–∞–¥–∞—á –ø–æ –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç—É:"
while [[ $(priority_queue_api is_empty) == "false" ]]; do
    task=$(priority_queue_api dequeue)
    priority=$(priority_queue_api peek_priority 2>/dev/null || echo "N/A")
    echo "  –û–±—Ä–∞–±–æ—Ç–∞–Ω–∞: $task (–ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç: $priority)"
    echo "  –û—Å—Ç–∞–ª–æ—Å—å –∑–∞–¥–∞—á: $(priority_queue_api size)"
done

echo ""
echo "‚úÖ –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"